.\" Automatically generated by Pod::Man 2.25 (Pod::Simple 3.16)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "psqall.sh 1"
.TH psqall.sh 1 "November 2012" "1.1" "Useful Shell Script"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
psqall.sh \- execute SQL commands on more databases
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBpsqall.sh\fR [\fB\-d\fR|\fB\-D\fR \fIdatabase\fR [\fI...\fR]] [\fB\-L\fR] [\fB\-i\fR \fIinifile\fR] \fIpsql-param\fR [\fI...\fR]
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-d\fR \fIdatabase\fR, \fB\-\-dbname=\fR\fIdatabase\fR" 4
.IX Item "-d database, --dbname=database"
execute the commands on this database ( default : all )
.IP "\fB\-D\fR \fIdatabase\fR, \fB\-\-exclude=\fR\fIdatabase\fR" 4
.IX Item "-D database, --exclude=database"
skip this database ( default : none )
.IP "\fB\-L\fR \fB\-\-line\-prefix\fR" 4
.IX Item "-L --line-prefix"
display the database name as prefix in each result line ( default : no )
.IP "\fB\-i\fR \fIinifile\fR, \fB\-\-inifile=\fR\fIinifile\fR" 4
.IX Item "-i inifile, --inifile=inifile"
configuration file ( default : \fIpsqall.ini\fR )
.IP "\fIpsql-param\fR" 4
.IX Item "psql-param"
parameters that \fIpsql\fR\|(1) accepts ( default : none )
.PP
In either case the databases can be specified by name or regular expression which matches their name. Both \fB\-d\fR and \fB\-D\fR can be repeated, \fB\-d\fR takes precedence over
\&\fB\-D\fR.
.PP
The default configuration file called \fIpsqall.ini\fR is always processed, unless empty string is specified as inifile.
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBpsqall.sh\fR is intended to be a small tool for automating some database related activities.
.PP
Mainly was written to give fast overviews in case there are many test databases on a development server, all with similar structure but slightly different data.
.PP
Also can be used to execute some database updates on all the available databases.
.SH "SYNTAX"
.IX Header "SYNTAX"
The configuration file is has .ini format, but it actually is more relaxed :
.IP "comments may begin with either \fB#\fR or \fB;\fR" 4
.IX Item "comments may begin with either # or ;"
.PD 0
.IP "keys and values may be separated by either \fB=\fR, \fB:\fR or space" 4
.IX Item "keys and values may be separated by either =, : or space"
.IP "sections are ignored ( lines starting with \fB[\fR are treated like comments )" 4
.IX Item "sections are ignored ( lines starting with [ are treated like comments )"
.PD
.PP
A typical configuration file looks like this :
.PP
.Vb 3
\&  [database]
\&  include=.*_test
\&  exclude=template1
\&
\&  [output]
\&  lineprefix=1
.Ve
.PP
The following keys are handled :
.IP "\fBinclude\fR" 4
.IX Item "include"
Similar with the \fB\-d\fR command line option, specifies database to execute the statements on.
.IP "\fBexclude\fR" 4
.IX Item "exclude"
Similar with the \fB\-D\fR command line option, specifies database to skip from execution.
.IP "\fBlineprefix\fR" 4
.IX Item "lineprefix"
Similar with the \fB\-L\fR command line option, specifies whether the output format should be line prefixed.
.Sp
When its value is anything else than empty string and \fI0\fR, line prefixed format gets turned on.
.PP
When the \fIdatabase\fR specified with the \fB\-d\fR or \fB\-D\fR switch or the \fBinclude\fR or \fBexclude\fR configuration key contains one of the \f(CW\*(C`.\*(C'\fR, \f(CW\*(C`?\*(C'\fR, \f(CW\*(C`*\*(C'\fR, \f(CW\*(C`+\*(C'\fR, \f(CW\*(C`(\*(C'\fR, \f(CW\*(C`)\*(C'\fR,
\&\f(CW\*(C`[\*(C'\fR, \f(CW\*(C`]\*(C'\fR, \f(CW\*(C`{\*(C'\fR and \f(CW\*(C`}\*(C'\fR metacharacters, it will be interpreted as regular expression and matched case insensitively against the database names, otherwise will be
interpreted as string and compared case sensitively with the database names.
.SH "ENVIRONMENT"
.IX Header "ENVIRONMENT"
The environment variables accepted by \fIpsql\fR\|(1) can be set. Setting \fB\s-1PGDATABASE\s0\fR is pointless as it will be always overridden by parameter.
.SH "FILES"
.IX Header "FILES"
.IP "\fIpsqall.ini\fR" 4
.IX Item "psqall.ini"
The default configuration file. Actually has the same name as the script, but with extension changed to \*(L".ini\*(R".
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIbash\fR\|(1), \fIpsql\fR\|(1)
.SH "TO DO"
.IX Header "TO DO"
Maybe handling of joined short parameters.
.SH "BUGS"
.IX Header "BUGS"
No bugs until now. Found bugs can be reported to the author.
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Use it healthy.
.SH "AUTHOR"
.IX Header "AUTHOR"
Feherke
